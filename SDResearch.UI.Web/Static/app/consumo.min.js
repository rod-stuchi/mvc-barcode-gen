var Consumo,consumoUtils,_dealershipdata;CodeBarGen.CodeBar.changeLinkActive("Conta de Consumo"),function(n){var f=function(){function n(){}return n}(),i=new f,r=function(){function n(){}return n}(),t,u;n.ConsumoUI=r;t=new r;u=function(){function n(){}return n.prototype.BindAutocomplete=function(n){$("#concessionaria").autocomplete({source:function(t,i){var r=new RegExp($.ui.autocomplete.escapeRegex(t.term),"i");i($.grep(n,function(n){return r.test(n.label)||r.test(n.value)}))},select:function(n,t){n.preventDefault();$(this).val(t.item.label);$("#concessionaria-codigo").val(t.item.value.padZero(3))}})},n.prototype.Valor=function(){$("#valor").maskMoney({prefix:"R$ ",allowNegative:!1,thousands:".",decimal:",",affixesStay:!0})},n.prototype.SliderValor=function(){$("#slider-value").slider({range:!0,min:1,max:1500,values:[1,200],slide:function(n,t){i.ValueStart=t.values[0];i.ValueEnd=t.values[1];$("#slider-value-text").text("R$ "+t.values[0]+" - R$ "+t.values[1])}});$("#slider-value-text").text("R$ "+$("#slider-value").slider("values",0)+" - R$ "+$("#slider-value").slider("values",1));i.ValueStart=$("#slider-value").slider("values",0);i.ValueEnd=$("#slider-value").slider("values",1)},n.prototype.BindUIObject=function(){t.segment=$("#concessionaria-codigo").val().toString().substring(0,1);t.code=$("#concessionaria-codigo").val().toString().substring(1,5);t.value=$("#valor").maskMoney("unmasked")[0];t.valueStart=i.ValueStart;t.valueEnd=i.ValueEnd;t.autoGenerate=$("#auto-check").is(":checked")},n.prototype.Validate=function(){if((consumoUtils.BindUIObject(),t.autoGenerate)||t.code&&t.value!==0)return!0;var n=0,i=setInterval(function(){t.code||$("#concessionaria").toggleClass("text-error");t.value===0&&$("#valor").toggleClass("text-error");n>4&&clearInterval(i);n++},250);return!1},n.prototype.GenConsumo=function(){$("#gen-consumo").on("click",function(){consumoUtils.Validate()&&$.ajax({url:"/ContaConsumo/GenerateConsumo",method:"post",async:!0,cache:!1,dataType:"json",data:{consumo:JSON.stringify(t)},success:function(n){var t=JSON.parse(n),i=$("#slider-zoom").slider("value"),r='<img src="data:image/png;base64,'+t.barcodeBase64+'" style="width:'+((i-1)*27.857142+450)+'px;"/>';$("#barcode64").html(r);$("#div-barcode64").collapse("show");$("#linha1-text").text(t.line);$("#div-linha1").collapse("show");$("#linha2-text").text(t.lineFormatted);$("#div-linha2").collapse("show");$(".hr-bottom").show();$("#valor").val(t.value);$("#valor").maskMoney("mask");$("#concessionaria-codigo").text(t.segment+""+t.code);_dealershipdata.map(function(n){n.value===t.segment+""+t.code&&$("#concessionaria").val(n.label)})},error:function(n,t,i){console.log(n);console.log(t);console.log(i)}})})},n}();n.Utils=u}(Consumo||(Consumo={}));consumoUtils=new Consumo.Utils;$(document).ready(function(){var n=new Common;n.CopyClipboard();n.SliderZoom();consumoUtils.BindAutocomplete(_dealershipdata);$(document).on("keydown",null,"f2",function(){$("#gen-consumo").click();$("input").blur()});$("input").on("keydown",null,"f2",function(){$("#gen-consumo").click();$("input").blur()});$("#concessionaria").on("change",function(){$(this).val()===""&&$("#concessionaria-codigo").val("")});$("#concessionaria-limpar").on("click",function(){$("#concessionaria").val("");$("#concessionaria").focus();$("#concessionaria-codigo").val("")});$("#valor-limpar").on("click",function(){$("#valor").val("");$("#valor").focus()});$('[data-toggle="tooltip"]').tooltip({container:"body",delay:{show:1500,hide:300}});$("#auto-check").on("change",function(){$("#concessionaria, #valor").val("");$("#concessionaria-codigo").val("");$("#div-barcode64").collapse("hide");$("#div-barcode64").on("hidden.bs.collapse",function(){$("#div-linha2").collapse("hide");$("#div-linha1").collapse("hide");$(".hr-bottom").hide()})});$("button").on("click",function(){this.blur()});consumoUtils.Valor();consumoUtils.SliderValor();consumoUtils.BindUIObject();consumoUtils.GenConsumo();$("[id^=slider] *, #navbar *, [class*='navbar-header'] *").prop("tabindex","-1")});
//# sourceMappingURL=consumo.min.js.map
