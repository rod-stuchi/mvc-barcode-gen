var Boleto,boletoUtils,_bankdata;CodeBarGen.CodeBar.changeLinkActive("Boleto"),function(n){var f=function(){function n(){}return n}(),i=new f,r=function(){function n(){}return n}(),t,u;n.BoletoUI=r;t=new r;u=function(){function n(){}return n.prototype.BindAutocomplete=function(n){$("#banco").autocomplete({source:function(t,i){var r=new RegExp($.ui.autocomplete.escapeRegex(t.term),"i");i($.grep(n,function(n){return r.test(n.label)||r.test(n.value)}))},select:function(n,t){n.preventDefault();$(this).val(t.item.label);$("#banco-codigo").text(t.item.value.padZero(3));$("#banco-codigo").removeClass("hidden")}})},n.prototype.CalculateDate=function(n,t){return moment().add(n,"d").format("DD/MM/YYYY")+" - "+moment().add(t,"d").format("DD/MM/YYYY")},n.prototype.Valor=function(){$("#valor").maskMoney({prefix:"R$ ",allowNegative:!1,thousands:".",decimal:",",affixesStay:!0})},n.prototype.SliderValor=function(){$("#slider-value").slider({range:!0,min:1,max:1500,values:[1,200],slide:function(n,t){i.ValueStart=t.values[0];i.ValueEnd=t.values[1];$("#slider-value-text").text("R$ "+t.values[0]+" - R$ "+t.values[1])}});$("#slider-value-text").text("R$ "+$("#slider-value").slider("values",0)+" - R$ "+$("#slider-value").slider("values",1));i.ValueStart=$("#slider-value").slider("values",0);i.ValueEnd=$("#slider-value").slider("values",1)},n.prototype.SliderVencimento=function(){$("#slider-vencimento").slider({range:!0,min:0,max:720,values:[0,90],slide:function(n,t){i.ExpirateStart=moment().add(t.values[0],"d").format("DD/MM/YYYY");i.ExpirateEnd=moment().add(t.values[1],"d").format("DD/MM/YYYY");$("#slider-vencimento-text").text(boletoUtils.CalculateDate(t.values[0],t.values[1]))}});$("#slider-vencimento-text").text(boletoUtils.CalculateDate($("#slider-vencimento").slider("values",0),$("#slider-vencimento").slider("values",1)));var n=$("#slider-vencimento").slider("values",0),t=$("#slider-vencimento").slider("values",1);i.ExpirateStart=moment().add(n,"d").format("DD/MM/YYYY");i.ExpirateEnd=moment().add(t,"d").format("DD/MM/YYYY")},n.prototype.BindUIObject=function(){t.bankCode=$("#banco-codigo").text();t.value=$("#valor").maskMoney("unmasked")[0];t.valueCheck=$("#valor-check").is(":checked");t.valueStart=i.ValueStart;t.valueEnd=i.ValueEnd;t.expirate=$("#vencimento").val();t.expirateCheck=$("#vencimento-check").is(":checked");t.expirateStart=i.ExpirateStart;t.expirateEnd=i.ExpirateEnd;t.autoGenerate=$("#auto-check").is(":checked")},n.prototype.Validate=function(){if(boletoUtils.BindUIObject(),t.autoGenerate)return!0;if(!t.bankCode||t.valueCheck&&t.value===0||t.expirateCheck&&!t.expirate){var n=0,i=setInterval(function(){t.bankCode||$("#banco").toggleClass("text-error");t.value===0&&t.valueCheck&&$("#valor").toggleClass("text-error");!t.expirate&&t.expirateCheck&&$("#vencimento").toggleClass("text-error");n>4&&clearInterval(i);n++},250);return!1}return!0},n.prototype.GenBoleto=function(){$("#gen-boleto").on("click",function(){boletoUtils.Validate()&&$.ajax({url:"/Boleto/GenerateBoleto",method:"post",async:!0,cache:!1,dataType:"json",data:{boleto:JSON.stringify(t)},success:function(n){var t=JSON.parse(n),i=$("#slider-zoom").slider("value"),r='<img src="data:image/png;base64,'+t.barcodeBase64+'" style="width:'+((i-1)*27.857142+450)+'px;"/>';$("#barcode64").html(r);$("#div-barcode64").collapse("show");$("#linha1-text").text(t.line);$("#div-linha1").collapse("show");$("#linha2-text").text(t.lineFormatted);$("#div-linha2").collapse("show");$(".hr-bottom").show();$("#valor").val(t.value);$("#valor").maskMoney("mask");$("#vencimento").val(t.expirate);$("#banco-codigo").text(t.bankCode.padZero(3));$("#banco-codigo").removeClass("hidden");_bankdata.map(function(n){n.value===t.bankCode&&$("#banco").val(n.label)})},error:function(n,t,i){console.log(n);console.log(t);console.log(i)}})})},n}();n.Utils=u}(Boleto||(Boleto={}));boletoUtils=new Boleto.Utils;$(document).ready(function(){var n=new Common;n.CopyClipboard();n.SliderZoom();boletoUtils.BindAutocomplete(_bankdata);$(document).on("keydown",null,"f2",function(){$("#gen-boleto").click();$("input").blur()});$("input").on("keydown",null,"f2",function(){$("#gen-boleto").click();$("input").blur()});$("#banco").on("change",function(){$(this).val()===""&&($("#banco-codigo").text(""),$("#banco-codigo").addClass("hidden"))});$("#banco-limpar").on("click",function(){$("#banco").val("");$("#banco").focus();$("#banco-codigo").addClass("hidden");$("#banco-codigo").text("")});$("#valor-limpar").on("click",function(){$("#valor").val("");$("#valor").focus()});$("#vencimento-limpar").on("click",function(){$("#vencimento").val("");$("#vencimento").focus()});$("#vencimento").datepicker({showOtherMonths:!0,selectOtherMonths:!0});$("#icon-calendar").on("click",function(){$("#vencimento").datepicker("show")});$('[data-toggle="tooltip"]').tooltip({container:"body",delay:{show:1500,hide:300}});$("#vencimento").mask("99/99/9999");$("#vencimento-check").on("change",function(){$(this).is(":checked")?$("#vencimento").removeProp("disabled"):($("#vencimento").val(""),$("#vencimento").prop("disabled","disabled"))});$("#valor-check").on("change",function(){$(this).is(":checked")?$("#valor").removeProp("disabled"):($("#valor").val(""),$("#valor").prop("disabled","disabled"))});$("#auto-check").on("change",function(){$("#banco, #valor, #vencimento").val("");$("#banco-codigo").addClass("hidden").text("");$("#div-barcode64").collapse("hide");$("#div-barcode64").on("hidden.bs.collapse",function(){$("#div-linha2").collapse("hide");$("#div-linha1").collapse("hide");$(".hr-bottom").hide()})});$("button").on("click",function(){this.blur()});boletoUtils.Valor();boletoUtils.SliderValor();boletoUtils.SliderVencimento();boletoUtils.BindUIObject();boletoUtils.GenBoleto();$("[id^=slider] *, #navbar *, [class*='navbar-header'] *").prop("tabindex","-1")});
//# sourceMappingURL=boleto.min.js.map
